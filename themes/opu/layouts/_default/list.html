{{ define "main" }}
<!-- Hero Section -->
<div class="relative lg:h-[60vh] h-screen pt-16">
  <div class="absolute inset-0 bg-black opacity-60 z-10"></div>
  <div id="hero-background" class="absolute inset-0 bg-cover bg-center"
    style="background-image: url('{{ .Params.hero_image | default "/images/default-hero.jpg" }}')">
  </div>

  <div id="dots-container" class="absolute inset-0 z-20"></div>

  <div
    class="relative z-30 container mx-auto px-4 h-full flex flex-col justify-center items-start text-left text-white">
    <p class="text-sm uppercase tracking-widest mb-20 flex items-center">
      Insights <span class="ml-2 inline-block w-12 h-px bg-white"></span>
    </p>
    <h1 class="text-4xl md:text-5xl font-bold mb-6 max-w-3xl leading-tight">
      {{ .Params.Title  }}
    </h1>
  </div>
</div>

<!-- Blog Section -->
<section class="lg:py-20 py-10 bg-gray-50">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {{ $paginator := .Paginate (where .Pages "Type" "blog") 9 }}
      {{ range $paginator.Pages }}
      <div class="rounded-lg overflow-hidden transition-all lg:mb-20 sm:mb-10 mb-5 duration-300 h-full">
        <a href="{{ .RelPermalink }}" class="group">
          <div class="aspect-w-16 aspect-h-9 overflow-hidden">
            {{ with .Params.featured_image }}
            <img src="{{ . }}" alt="{{ $.Title }}"
              class="w-full h-56 object-cover transition-transform duration-500 group-hover:scale-105" />
            {{ else }}
            <div class="bg-black w-full h-full relative">
              <div class="absolute left-10 top-12 w-16 h-16 bg-green-400 transform rotate-45"></div>
              <div class="absolute left-24 top-8 w-20 h-20 bg-purple-500 transform rotate-45"></div>
              <div class="absolute right-10 top-8 w-16 h-16 bg-blue-600 transform rotate-45"></div>
              <div class="absolute right-32 top-12 w-20 h-20 bg-blue-400 rounded-full opacity-70"></div>
            </div>
            {{ end }}
          </div>
        </a>

        <div>
          {{ with .Params.tags }}
          <div class="flex flex-wrap gap-2 mb-2 mt-3">
            {{ range . }}
            <a href="/tags/{{ . | urlize }}"
              class="text-blue-600 hover:underline uppercase hover:text-blue-800 font-medium text-xs">
              {{ . }}
            </a>
            {{ end }}
          </div>
          {{ end }}

          <a href="{{ .RelPermalink }}" class="group">
            <h3
              class="text-xl font-bold text-blue-900 mb-3 group-hover:text-blue-600 hover:underline transition-colors">
              {{ .Title }}
            </h3>

            <p class="text-gray-700 mb-4 line-clamp-3">
              {{ .Summary | truncate 110 }}
            </p>

            <div class="flex items-center gap-6 mt-auto">
              <span class="text-sm text-gray-900 font-medium">{{ .Params.author }}</span>
              <svg class="w-1 h-1 fill-current text-gray-500" viewBox="0 0 4 4">
                <circle cx="2" cy="2" r="2" />
              </svg>
              <span class="text-sm text-gray-500">{{ .Date.Format "January 2, 2006" }}</span>
            </div>
          </a>
        </div>
      </div>
      {{ end }}
    </div>

    <!-- Pagination -->
    {{ if gt $paginator.TotalPages 1 }}
    <div class="flex justify-center items-center space-x-2 mt-12">
      <a href="{{ if $paginator.HasPrev }}{{ $paginator.Prev.URL }}{{ else }}#{{ end }}"
        class="px-4 py-2 text-sm border rounded {{ if not $paginator.HasPrev }}opacity-50 cursor-not-allowed{{ else }}hover:bg-gray-50{{ end }}">
        Previous
      </a>

      {{ range $paginator.Pagers }}
      <a href="{{ .URL }}"
        class="px-4 py-2 text-sm border rounded {{ if eq . $paginator }} bg-gray-900 text-white {{ else }} hover:bg-gray-50 {{ end }}">
        {{ .PageNumber }}
      </a>
      {{ end }}

      <a href="{{ if $paginator.HasNext }}{{ $paginator.Next.URL }}{{ else }}#{{ end }}"
        class="px-4 py-2 text-sm border rounded {{ if not $paginator.HasNext }}opacity-50 cursor-not-allowed{{ else }}hover:bg-gray-50{{ end }}">
        Next
      </a>
    </div>
    {{ end }}
  </div>
</section>
{{ end }}